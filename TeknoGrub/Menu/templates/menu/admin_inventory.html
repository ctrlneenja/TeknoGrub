{% extends 'dashboard_base.html' %}
{% load static %}
{% block title %}Inventory Management{% endblock %}
{% block extra_head %}
    <link rel="stylesheet" href="{% static 'css/admin_staff.css' %}">
    <style>
        .admin-table-container { padding: 20px; }
        .table-header-row { display: flex; justify-content: space-between; margin-bottom: 20px; align-items: center; }
        .inventory-table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        .inventory-table th, .inventory-table td { border-bottom: 1px solid #eee; padding: 15px; text-align: left; }
        .inventory-table th { background-color: #333; color: white; font-weight: 700; }
        .inventory-table tr:hover { background-color: #f8f8f8; }
        .badge-low { background: #ffebee; color: #c62828; }
        .badge-ok { background: #e8f5e9; color: #2e7d32; }
    </style>
{% endblock %}

{% block content %}
<div class="admin-table-container">
    <div class="table-header-row">
        <h2 class="page-title" style="margin:0;">Inventory Management</h2>
        <a href="{% url 'add_item' %}" class="btn-primary">+ Add New Item</a>
    </div>

    <div class="search-container" style="max-width: 400px; margin-bottom: 20px;">
        <i class="fa-solid fa-search search-icon" style="position:absolute; left:12px; top:50%; transform:translateY(-50%); color:#888;"></i>
        <input type="text" class="search-input" placeholder="Search inventory items..." style="background:#f0f0f0; border:1px solid #ccc;">
    </div>

    <table class="inventory-table">
        <thead>
            <tr>
                <th>Item Name</th>
                <th>Current Stock</th>
                <th>Threshold Level</th>
                <th>Status</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for item in inventory_list %}
            <tr>
                <td>{{ item.item.name }}</td>
                <td>{{ item.current_stock }}</td>
                <td>{{ item.threshold_level }}</td>
                <td>
                    {% if item.current_stock < item.threshold_level %}
                        <span class="badge badge-low">Low Stock</span>
                    {% else %}
                        <span class="badge badge-ok">In Stock</span>
                    {% endif %}
                </td>
                <td>
                    <a href="{% url 'edit_item' item.item.pk %}" title="Edit" style="color:blue; margin-right:10px;"><i class="fa-solid fa-pen"></i></a>
                    <a href="#" title="Delete" style="color:red;"><i class="fa-solid fa-trash"></i></a>
                </td>
            </tr>
            {% empty %}
            <tr><td colspan="5" style="text-align:center; color:#888;">Inventory is empty.</td></tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}