{% extends 'dashboard_base.html' %}
{% load static %}
{% block title %}{% if item %}Edit Item{% else %}Add Item{% endif %}{% endblock %}

{% block extra_head %}
    <style>
        /* Styles matching the dark admin theme and white form card */
        .admin-form-container { max-width: 800px; margin: 20px auto; color: #333; }
        .page-title { color: white; font-size: 2rem; font-weight: 800; margin-bottom: 20px; }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; font-weight: 600; color: #550508; margin-bottom: 5px; }
        input[type="text"], input[type="number"], select, textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ccc;
            border-radius: 8px;
            font-size: 1rem;
            background: #f9f9f9;
            color: #333;
        }
        .form-row { display: flex; gap: 20px; margin-bottom: 15px; }
        .half { flex: 1; }
        .checkbox-label { display: flex; align-items: center; gap: 10px; font-weight: 600; color: #550508; }
        .image-preview-box { width: 100%; height: 150px; border: 2px dashed #ccc; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: #999; margin-top: 10px; background-size: cover; background-position: center; }
        .form-actions { margin-top: 30px; display: flex; justify-content: flex-end; gap: 15px; }
        .btn-save { background: #FBCD36; color: #550508; padding: 10px 25px; border-radius: 8px; font-weight: bold; border: none; cursor: pointer; }
        .btn-cancel { background: #ccc; color: #333; padding: 10px 25px; border-radius: 8px; text-decoration: none; font-weight: bold; }
    </style>
{% endblock %}

{% block content %}
<div class="admin-form-container">
    <h2 class="page-title">{% if item %}Edit Item: {{ item.name }}{% else %}Add New Item{% endif %}</h2>
    
    <form method="POST" enctype="multipart/form-data">
      {% csrf_token %}
      
      <div class="form-row">
            <div class="form-group half">
              <label>Category</label>
              {{ form.category }}
            </div>
            <div class="form-group half">
              <label>Canteen</label>
              {{ form.canteen }}
            </div>
      </div>
      
      <div class="form-group">
        <label>Item Name</label>
        {{ form.name }}
      </div>
      
      <div class="form-group">
        <label>Price (â‚±)</label>
        {{ form.price }}
      </div>

      <div class="form-group">
        <label>Description</label>
        {{ form.description }}
      </div>

      <div class="form-group">
        <label>Ingredients (Comma separated)</label>
        {{ form.ingredients }}
      </div>

      <div class="form-group">
        <label>Item Image</label>
        {{ form.image_url }}
        {% if item.image_url %}
          <div class="image-preview-box" style="background-image: url('{{ item.image_url.url }}');"></div>
        {% else %}
          <div class="image-preview-box">No Image Selected</div>
        {% endif %}
      </div>

      <div class="form-row">
        <div class="form-group half">
          <label>Current Stock</label>
          {{ form.current_stock }}
        </div>
        <div class="form-group half">
          <label>Threshold Level</label>
          {{ form.threshold_level }}
        </div>
      </div>
      
      <div class="form-group" style="margin-top: 10px;">
        <label class="checkbox-label">
            {{ form.is_available }} Available
        </label>
      </div>

      <div class="form-actions">
        <a href="{% url 'inventory' %}" class="btn-cancel">Cancel</a>
        <button type="submit" class="btn-save">Save Changes</button>
      </div>
    </form>
</div>
{% endblock %}